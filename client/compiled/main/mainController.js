'use strict';

angular.module('main', []).controller('wanderController', function ($scope, $http, $window) {

  $scope.items = [];
  $scope.lentToMe = [];

  // register when the user has clicked on an unused item
  $scope.borrowItem = function (item) {
    $http({
      method: 'PUT',
      url: '/items/take/',
      data: { item: item }
    });
  };

  $scope.returnItem = function (item) {
    $http({
      method: 'PUT',
      url: '/items/return/',
      data: { item: item }
    });
  };

  $scope.removeItem = function (item) {
    $http({
      method: 'DELETE',
      url: '/items',
      data: { item: item }
    });
  };

  // update the list of items available
  $scope.update = function (all) {
    all = all ? 'all' : '';
    $http({
      method: 'GET',
      url: '/items/' + all
    }).then(function (update) {
      update.data.map(function (item) {
        $scope.items.push(item);
      });
    });
  };

  $scope.getMyLentItems = function () {
    $http({
      method: 'GET',
      url: '/items/mine'
    }).then(function (update) {
      console.log(update);
      update.data.map(function (item) {
        $scope.lentToMe.push(item);
      });
    });
  };

  // create and submit a new items to the server
  $scope.submitItem = function (item) {
    if (item) {
      $http({
        method: 'POST',
        url: '/items/',
        data: { item: item }
      }).then(function (res) {
        $scope.update();
      });
      $scope.item = '';
    } else {
      console.log('invalid string');
    }
  };
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2FwcC9tYWluL21haW5Db250cm9sbGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsUUFBUSxNQUFSLENBQWUsTUFBZixFQUF1QixFQUF2QixFQUNDLFVBREQsQ0FDWSxrQkFEWixFQUNnQyxVQUFDLE1BQUQsRUFBUyxLQUFULEVBQWdCLE9BQWhCLEVBQTRCOztBQUUxRCxTQUFPLEtBQVAsR0FBZSxFQUFmO0FBQ0EsU0FBTyxRQUFQLEdBQWtCLEVBQWxCOzs7QUFHQSxTQUFPLFVBQVAsR0FBb0IsVUFBQyxJQUFELEVBQVU7QUFDNUIsVUFBTTtBQUNKLGNBQVEsS0FESjtBQUVKLFdBQUssY0FGRDtBQUdKLFlBQU0sRUFBQyxNQUFNLElBQVA7QUFIRixLQUFOO0FBS0QsR0FORDs7QUFRQSxTQUFPLFVBQVAsR0FBb0IsVUFBQyxJQUFELEVBQVU7QUFDNUIsVUFBTTtBQUNKLGNBQVEsS0FESjtBQUVKLFdBQUssZ0JBRkQ7QUFHSixZQUFNLEVBQUMsTUFBTSxJQUFQO0FBSEYsS0FBTjtBQUtELEdBTkQ7O0FBUUEsU0FBTyxVQUFQLEdBQW9CLFVBQUMsSUFBRCxFQUFVO0FBQzVCLFVBQU07QUFDSixjQUFRLFFBREo7QUFFSixXQUFLLFFBRkQ7QUFHSixZQUFNLEVBQUMsTUFBTSxJQUFQO0FBSEYsS0FBTjtBQUtELEdBTkQ7OztBQVNBLFNBQU8sTUFBUCxHQUFnQixVQUFDLEdBQUQsRUFBUztBQUN2QixVQUFNLE1BQU0sS0FBTixHQUFjLEVBQXBCO0FBQ0EsVUFBTTtBQUNKLGNBQVEsS0FESjtBQUVKLFdBQUssWUFBWTtBQUZiLEtBQU4sRUFJQyxJQUpELENBSU0sVUFBQyxNQUFELEVBQVk7QUFDaEIsYUFBTyxJQUFQLENBQVksR0FBWixDQUFnQixVQUFDLElBQUQsRUFBVTtBQUN4QixlQUFPLEtBQVAsQ0FBYSxJQUFiLENBQWtCLElBQWxCO0FBQ0QsT0FGRDtBQUdELEtBUkQ7QUFTRCxHQVhEOztBQWFBLFNBQU8sY0FBUCxHQUF3QixZQUFNO0FBQzVCLFVBQU07QUFDSixjQUFRLEtBREo7QUFFSixXQUFLO0FBRkQsS0FBTixFQUlDLElBSkQsQ0FJTSxVQUFDLE1BQUQsRUFBWTtBQUNoQixjQUFRLEdBQVIsQ0FBWSxNQUFaO0FBQ0EsYUFBTyxJQUFQLENBQVksR0FBWixDQUFnQixVQUFDLElBQUQsRUFBVTtBQUN4QixlQUFPLFFBQVAsQ0FBZ0IsSUFBaEIsQ0FBcUIsSUFBckI7QUFDRCxPQUZEO0FBR0QsS0FURDtBQVVELEdBWEQ7OztBQWNBLFNBQU8sVUFBUCxHQUFvQixVQUFDLElBQUQsRUFBVTtBQUM1QixRQUFJLElBQUosRUFBVTtBQUNSLFlBQU07QUFDSixnQkFBUSxNQURKO0FBRUosYUFBSyxTQUZEO0FBR0osY0FBTSxFQUFDLE1BQU0sSUFBUDtBQUhGLE9BQU4sRUFLQyxJQUxELENBS00sVUFBQyxHQUFELEVBQVM7QUFDYixlQUFPLE1BQVA7QUFDRCxPQVBEO0FBUUEsYUFBTyxJQUFQLEdBQWMsRUFBZDtBQUNELEtBVkQsTUFVTztBQUNMLGNBQVEsR0FBUixDQUFZLGdCQUFaO0FBQ0Q7QUFDRixHQWREO0FBZUQsQ0ExRUQiLCJmaWxlIjoibWFpbkNvbnRyb2xsZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgnbWFpbicsIFtdKVxuLmNvbnRyb2xsZXIoJ3dhbmRlckNvbnRyb2xsZXInLCAoJHNjb3BlLCAkaHR0cCwgJHdpbmRvdykgPT4ge1xuXG4gICRzY29wZS5pdGVtcyA9IFtdO1xuICAkc2NvcGUubGVudFRvTWUgPSBbXTtcblxuICAvLyByZWdpc3RlciB3aGVuIHRoZSB1c2VyIGhhcyBjbGlja2VkIG9uIGFuIHVudXNlZCBpdGVtXG4gICRzY29wZS5ib3Jyb3dJdGVtID0gKGl0ZW0pID0+IHtcbiAgICAkaHR0cCh7XG4gICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgdXJsOiAnL2l0ZW1zL3Rha2UvJyxcbiAgICAgIGRhdGE6IHtpdGVtOiBpdGVtfVxuICAgIH0pO1xuICB9XG5cbiAgJHNjb3BlLnJldHVybkl0ZW0gPSAoaXRlbSkgPT4ge1xuICAgICRodHRwKHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICB1cmw6ICcvaXRlbXMvcmV0dXJuLycsXG4gICAgICBkYXRhOiB7aXRlbTogaXRlbX1cbiAgICB9KTtcbiAgfVxuXG4gICRzY29wZS5yZW1vdmVJdGVtID0gKGl0ZW0pID0+IHtcbiAgICAkaHR0cCh7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgdXJsOiAnL2l0ZW1zJyxcbiAgICAgIGRhdGE6IHtpdGVtOiBpdGVtfVxuICAgIH0pO1xuICB9XG5cbiAgLy8gdXBkYXRlIHRoZSBsaXN0IG9mIGl0ZW1zIGF2YWlsYWJsZVxuICAkc2NvcGUudXBkYXRlID0gKGFsbCkgPT4ge1xuICAgIGFsbCA9IGFsbCA/ICdhbGwnIDogJyc7XG4gICAgJGh0dHAoe1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIHVybDogJy9pdGVtcy8nICsgYWxsXG4gICAgfSlcbiAgICAudGhlbigodXBkYXRlKSA9PiB7XG4gICAgICB1cGRhdGUuZGF0YS5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgJHNjb3BlLml0ZW1zLnB1c2goaXRlbSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gICRzY29wZS5nZXRNeUxlbnRJdGVtcyA9ICgpID0+IHtcbiAgICAkaHR0cCh7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgdXJsOiAnL2l0ZW1zL21pbmUnXG4gICAgfSlcbiAgICAudGhlbigodXBkYXRlKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyh1cGRhdGUpO1xuICAgICAgdXBkYXRlLmRhdGEubWFwKChpdGVtKSA9PiB7XG4gICAgICAgICRzY29wZS5sZW50VG9NZS5wdXNoKGl0ZW0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBjcmVhdGUgYW5kIHN1Ym1pdCBhIG5ldyBpdGVtcyB0byB0aGUgc2VydmVyXG4gICRzY29wZS5zdWJtaXRJdGVtID0gKGl0ZW0pID0+IHtcbiAgICBpZiAoaXRlbSkge1xuICAgICAgJGh0dHAoe1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgdXJsOiAnL2l0ZW1zLycsXG4gICAgICAgIGRhdGE6IHtpdGVtOiBpdGVtfVxuICAgICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgJHNjb3BlLnVwZGF0ZSgpO1xuICAgICAgfSk7XG4gICAgICAkc2NvcGUuaXRlbSA9ICcnO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygnaW52YWxpZCBzdHJpbmcnKTtcbiAgICB9XG4gIH07XG59KTtcbiJdfQ==